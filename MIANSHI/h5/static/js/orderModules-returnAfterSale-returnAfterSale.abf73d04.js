(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderModules-returnAfterSale-returnAfterSale"],{"0461":function(e,t,i){var a=i("61f6");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("43f88e64",a,!0,{sourceMap:!1,shadowMode:!1})},"1c74":function(e,t,i){"use strict";var a=i("4ea4");i("99af"),i("4160"),i("c975"),i("baa5"),i("a434"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("2909")),r=i("85e5"),o={name:"returnAfterSale",components:{},props:{},data:function(){return{staticServer:this.$imgUrlHead,result:null,checkBox:[{id:0,name:"质量问题",checked:!1},{id:1,name:"服务问题",checked:!1},{id:2,name:"其他",checked:!1}],img:[],count:10,tareaText:""}},methods:{init:function(){var e=this;(0,r.getAfterSalesDetail)(this.orderId).then((function(t){e.result=JSON.parse(JSON.stringify(t.result))}))},uploadImg:function(){var e=this;e.imgCount>0?uni.chooseImage({count:e.imgCount,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var i=t.tempFilePaths;i.forEach((function(t){uni.uploadFile({url:e.$server+"/portalapp/p/freeUpload",filePath:t,name:"files",success:function(t){e.img=[].concat((0,n.default)(e.img),(0,n.default)(JSON.parse(t.data).result))}})}))},fail:function(e){}}):uni.showToast({title:"最多可以上传十张图片",icon:"none",duration:2e3,mask:!0,success:function(e){}})},delImg:function(e){var t=this;t.img.splice(e,1)},changeChecked:function(e){this.checkBox[e].checked=!this.checkBox[e].checked},toAddAfterSale:function(){var e=this,t=this.getNowChecked();if("ok"==t){var i=this.result,a=i.id,n=i.code,o="";this.checkBox.forEach((function(e){e.checked&&(o+=e.name+",")})),o=o.substring(0,o.lastIndexOf(","));var c={afterSalesVo:{orderId:a,orderCode:n,description:this.tareaText,reason:o},productVo:[],certificateVo:[]},s=[];this.result.product.forEach((function(e){s.push(e.productId)})),JSON.parse(this.idxList).forEach((function(t){var i=s.indexOf(t);if(i>-1){var a=JSON.parse(JSON.stringify(e.result.product[i])),n=a.productId,r=a.productName,o=a.productSpec,d=a.imageUrl,l=a.totalQuantity,u=a.price;c.productVo.push({productId:n,productName:r,productSpec:o,limitPicture:d,number:l,price:u})}})),this.img.forEach((function(t){c.certificateVo.push({type:1,url:e.staticServer+t})})),(0,r.saveAfterSales)(c).then((function(t){200===t.code?(uni.showToast({title:"提交成功",icon:"none",duration:1500}),setTimeout((function(){e.$navigateBack(2)}),1500)):uni.showToast({title:t.message,icon:"none"})}))}else uni.showToast({title:t,icon:"none"})},getNowChecked:function(){return this.checkBox[0].checked&&(this.checkBox[1].checked||this.checkBox[2].checked)?this.tareaText?this.img.length<1?"请上传凭证":"ok":"请输入售后说明":this.checkBox[0].checked?this.img.length<1?"请上传凭证":"ok":this.checkBox[1].checked||this.checkBox[2].checked?this.tareaText?"ok":"请输入售后说明":"请选择售后原因"}},computed:{theNum:function(){return this.tareaText.length},imgCount:function(){return 10-this.img.length}},onLoad:function(e){console.log("onLoad -> option",e),this.orderId=e.orderId,this.idxList=e.idxList,this.init()},created:function(){},mounted:function(){},filters:{}};t.default=o},2909:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=c(i("6005")),n=c(i("db90")),r=c(i("06c5")),o=c(i("3427"));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return(0,a.default)(e)||(0,n.default)(e)||(0,r.default)(e)||(0,o.default)()}},3427:function(e,t,i){"use strict";function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},3706:function(e,t,i){"use strict";i.r(t);var a=i("9de9"),n=i("9e9f");for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);i("d5f5");var o,c=i("f0c5"),s=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"62d2600a",null,!1,a["a"],o);t["default"]=s.exports},6005:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(i("6b75"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e))return(0,a.default)(e)}},"61f6":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.returnAfterSale[data-v-62d2600a]{position:relative;min-height:100vh;padding:%?20?% 0 %?230?% 0;box-sizing:border-box;background:#fff}.returnAfterSale .title[data-v-62d2600a]{padding:0 %?28?%}.returnAfterSale .title .title-text[data-v-62d2600a]{color:#333;font-size:%?32?%;line-height:%?100?%;font-weight:500;font-family:PingFangSC-Medium}.returnAfterSale .title .title-choose[data-v-62d2600a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-bottom:%?28?%}.returnAfterSale .title .title-choose .checkbox-item[data-v-62d2600a]{width:%?208?%;height:%?64?%;line-height:%?64?%;border-radius:%?8?%;color:#666;background:#f5f5f5;border:%?2?% solid #f5f5f5;text-align:center}.returnAfterSale .title .title-choose .cur[data-v-62d2600a]{color:#dc213e;background:rgba(220,35,30,.1);border:%?2?% solid #dc213e}.returnAfterSale .content[data-v-62d2600a]{margin-top:%?28?%}.returnAfterSale .content .textarea[data-v-62d2600a]{width:100%;height:%?200?%;box-sizing:border-box;padding:%?28?%}.returnAfterSale .content .textarea_count[data-v-62d2600a]{padding-right:%?28?%;text-align:right;font-size:%?28?%;color:#666;padding:0 %?28?% %?20?% 0}.returnAfterSale .content .img[data-v-62d2600a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?30?% %?20?%;box-sizing:border-box;border-top:%?2?% solid #ccc;-webkit-flex-wrap:wrap;flex-wrap:wrap}.returnAfterSale .content .img .img_item[data-v-62d2600a]{position:relative;width:%?158?%;height:%?158?%;border-radius:%?8?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?28?%;box-sizing:border-box;margin-right:%?20?%;margin-bottom:%?20?%;padding:0}.returnAfterSale .content .img .img_item .img_item_add[data-v-62d2600a]{width:100%;height:100%}.returnAfterSale .content .img .img_item .img_item_del[data-v-62d2600a]{position:absolute;right:%?-16?%;top:%?-16?%;width:%?36?%;height:%?36?%}.returnAfterSale .content .img .add_btn[data-v-62d2600a]{position:relative;border-style:dashed;width:%?158?%;height:%?158?%;border:%?4?% dashed #ccc;border-radius:%?8?%}.returnAfterSale .content .img .add_btn .line1[data-v-62d2600a]{position:absolute;top:%?46?%;left:%?44?%;width:%?68?%;height:%?4?%;background:#ccc}.returnAfterSale .content .img .add_btn .line2[data-v-62d2600a]{position:absolute;top:%?18?%;left:%?76?%;width:%?4?%;height:%?68?%;background:#ccc}.returnAfterSale .content .img .add_btn .text[data-v-62d2600a]{position:absolute;left:0;bottom:%?22?%;font-size:%?20?%;color:#999;text-align:center;width:100%}.returnAfterSale .placeView[data-v-62d2600a]{background:#f6f7f8;width:100%}.returnAfterSale .btn-box[data-v-62d2600a]{position:absolute;left:0;bottom:0;width:100%;height:%?100?%;line-height:%?100?%;color:#fff;background:#dc231e;font-size:%?32?%;text-align:center}',""]),e.exports=t},"85e5":function(e,t,i){"use strict";var a=i("4ea4");i("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.afterSalesDetail=t.repealIt=t.saveAfterSales=t.getAfterSalesDetail=void 0;var n=a(i("039e")),r=function(e){return n.default.get("/store/order/find_after_sale_by_id?orderId=".concat(e))};t.getAfterSalesDetail=r;var o=function(e){return n.default.post("/store/afterSales/do_save_after_sales",e,{isJson:!0})};t.saveAfterSales=o;var c=function(e,t){return n.default.post("/store/afterSales/revoke/".concat(e,"/").concat(t))};t.repealIt=c;var s=function(e){return n.default.get("/store/afterSales/find_after_sales_detail?id=".concat(e))};t.afterSalesDetail=s},"9de9":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"returnAfterSale"},[i("v-uni-view",{staticClass:"placeView",staticStyle:{height:"20rpx"}}),i("v-uni-view",{staticClass:"title"},[i("v-uni-view",{staticClass:"title-text"},[e._v("售后原因")]),i("v-uni-view",{staticClass:"title-choose"},e._l(e.checkBox,(function(t,a){return i("v-uni-view",{key:a,staticClass:"checkbox-item",class:{cur:t.checked},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeChecked(a)}}},[e._v(e._s(t.name))])})),1)],1),i("v-uni-view",{staticClass:"placeView",staticStyle:{height:"20rpx"}}),i("v-uni-view",{staticClass:"content"},[i("v-uni-textarea",{staticClass:"textarea",attrs:{name:"explain",maxlength:"200",cols:"3",rows:"3",placeholder:"请输入售后说明…","placeholder-style":"font-size: '28rpx'; colro: '#ccc'"},model:{value:e.tareaText,callback:function(t){e.tareaText=t},expression:"tareaText"}}),i("v-uni-view",{staticClass:"textarea_count"},[e._v(e._s(e.theNum)),i("span",{staticStyle:{color:"#cccccc"}},[e._v("/200")])]),i("v-uni-view",{staticClass:"img"},[e._l(e.img,(function(t,a){return i("v-uni-view",{key:a,staticClass:"img_item"},[i("img",{staticClass:"img_item_add",attrs:{src:e.staticServer+t,alt:"图片",mode:"aspectFit"}}),i("img",{staticClass:"img_item_del",attrs:{src:"/static/images/close2.png",alt:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delImg(a)}}})])})),i("v-uni-view",{staticClass:"add_btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadImg.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"line1"}),i("v-uni-view",{staticClass:"line2"}),i("v-uni-view",{staticClass:"text"},[e._v("上传凭证"+e._s(e.img.length)+"/10")])],1)],2)],1),i("v-uni-view",{staticClass:"btn-box",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toAddAfterSale.apply(void 0,arguments)}}},[e._v("提交售后申请")])],1)},r=[]},"9e9f":function(e,t,i){"use strict";i.r(t);var a=i("1c74"),n=i.n(a);for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=n.a},d5f5:function(e,t,i){"use strict";var a=i("0461"),n=i.n(a);n.a},db90:function(e,t,i){"use strict";function a(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}}]);