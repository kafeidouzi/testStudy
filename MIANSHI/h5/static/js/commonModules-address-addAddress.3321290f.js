(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["commonModules-address-addAddress"],{"29c0":function(e,t,i){"use strict";var a=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getCompleteArea=t.getInfo=t.getGaiaProductOtherPrice=t.setDefaultAddress=t.syscGaiaProductPrice=t.getHint=t.loadAreasCode=t.loadAreas=t.loadCities=t.loadProvinces=t.deladdress=t.saveAddress=t.loadAddress=t.defaultaddress=t.excAddressList=t.addressList=void 0;var s=a(i("039e")),n=function(e){return s.default.post("/p/addressList",e)};t.addressList=n;var r=function(e){return s.default.get("/store/address/getAddressList")};t.excAddressList=r;var o=function(e){return s.default.post("/p/defaultaddress",e)};t.defaultaddress=o;var d=function(e){return s.default.post("/p/loadAddress",e)};t.loadAddress=d;var c=function(e){return s.default.post("/p/saveAddress",e)};t.saveAddress=c;var l=function(e){return s.default.post("/p/deladdress",e)};t.deladdress=l;var u=function(e){return s.default.post("/common/loadProvinces",e)};t.loadProvinces=u;var f=function(e){return s.default.post("/common/loadCities/"+e.provinceid)};t.loadCities=f;var h=function(e){return s.default.post("/common/loadAreas/"+e.loadAreas)};t.loadAreas=h;var p=function(e){return s.default.post("/common/getAreaCodeList/"+e.loadAreas)};t.loadAreasCode=p;var v=function(e){return s.default.get("/customized/p/findInputPrompt?"+e)};t.getHint=v;var m=function(e){return s.default.post("/p/proofing/order/syscGaiaProductPrice",e,{isJson:!0})};t.syscGaiaProductPrice=m;var g=function(e){return s.default.post("/store/address/setDefaultAddress",e,{isJson:!0})};t.setDefaultAddress=g;var b=function(e){return s.default.post("/p/proofing/order/getGaiaProductOtherPrice",e,{isJson:!0})};t.getGaiaProductOtherPrice=b;var x=function(e){return s.default.get("/p/getRecentAddress",e,{isShowToast:!1})};t.getInfo=x;var w=function(e){return s.default.get("/get_complete_area_by_code?areaCode="+e)};t.getCompleteArea=w},"35f1":function(e,t,i){"use strict";var a=i("d961"),s=i.n(a);s.a},"64b8":function(e,t,i){"use strict";i.r(t);var a=i("6e79"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=s.a},"6e79":function(e,t,i){"use strict";var a=i("4ea4");i("99af"),i("4de4"),i("c975"),i("ac1f"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var s=a(i("1da1")),n=a(i("5530")),r=a(i("ade3")),o=i("2f62"),d=i("29c0"),c={data:function(){var e;return e={imgUrlHead:this.$imgUrlHead,staticServer:this.$staticServer,addressId:"",receiver:"",mobile:"",province:"",provinceId:"",city:"",cityId:"",area:"",areaId:"",address:"",subAdds:"",defaultAdd:!1,addressDef:!1,gocheck:!1,addrId:"",recommend:[],updateSubAdds:!1,saveSubAdds:"",location:"",showAddress:!1,canSave:!0,district:"",adcode:""},(0,r.default)(e,"location",""),(0,r.default)(e,"name",""),(0,r.default)(e,"newAddress",""),(0,r.default)(e,"houseNumber",""),(0,r.default)(e,"addressList",[]),e},computed:(0,n.default)((0,n.default)({},(0,o.mapState)(["themes","isHaveJaw","isIphone"])),{},{phoneRight:function(){return/^[1][0-9]{10}$/.test(this.mobile)},subAddRight:function(){return/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g.test(this.subAdds)},receiverRight:function(){return/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g.test(this.receiver)},mobileRight:function(){return/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g.test(this.mobile)},iphoneSetCss:function(){return~this.isIphone.indexOf("iPhone")},canShowAddress:function(){return this.showAddress&&this.addressList.length>0&&!this.receiver}}),watch:{},onLoad:function(e){e.addrId&&(this.addrId=e.addrId),this.title=e.addrId?"编辑地址":"新增地址",uni.setNavigationBarTitle({title:this.title}),this.getUserInfo()},onShow:function(){this.gocheck=!1,this.canSave=!0},onUnload:function(){this.gocheck?this.gocheck=!1:(uni.removeStorageSync("text"),uni.removeStorageSync("keys"))},mounted:function(){var e=this;this.addressId=this.addrId,this.addrId&&(0,d.loadAddress)({addrId:this.addrId}).then((function(t){var i=t.result,a=i.receiver,s=i.mobile,n=i.province,r=i.provinceId,o=i.city,d=i.cityId,c=i.areaCode,l=i.area,u=i.areaId,f=i.subAdds,h=i.houseNumber,p=i.ing,v=i.lat,m=i.commonAddr;1==t.status&&(e.receiver=a,e.mobile=s,e.province=n,e.provinceId=r,e.city=o,e.cityId=d,e.adcode=c,e.area=l,e.areaId=u,e.subAdds=f,e.houseNumber=h||"",e.location=p&&v?"".concat(p,",").concat(v):"",e.address=f,e.defaultAdd="0"!=m,e.addressDef="0"!=m,e.setInitData())})),this.setInitData()},methods:{changeDefault:function(){this.defaultAdd=!this.defaultAdd},changeReceiver:function(e){this.receiver=e.receiver,this.mobile=e.mobile},changeAD:function(e){this.saveSubAdds=e.district+e.address+e.name,this.subAdds=e.district+e.address+e.name,this.location=e.location,this.updateSubAdds=!1,this.recommend=[],uni.pageScrollTo({scrollTop:0,duration:300})},subAddsChange:function(e){this.updateSubAdds=!0,this.$nextTick((function(){uni.pageScrollTo({scrollTop:90,duration:300})}))},getNowHint:function(e){var t=this,i=this.saveSubAdds;if(e.detail.value.indexOf(i)<0&&(this.location=""),e.detail.value.length<2)this.recommend=[];else{var a="";a+="keywords=".concat(e.detail.value),this.city&&(a+="&city=".concat(this.city)),(0,d.getHint)(a).then((function(e){var i=e,a=i.filter((function(e){return e.location.length>0}));t.recommend=a}))}},setInitData:function(){var e=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var i,a,s,n,r,o,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!uni.getStorageSync("keys")){t.next=15;break}return e.data=JSON.parse(uni.getStorageSync("keys")),i=e.data,a=i.district,s=i.adcode,n=i.location,r=i.name,o=i.newAddress,i.province,e.district=a,e.adcode=s,e.location=n,e.name=r,e.newAddress=o,e.address=r,t.next=11,e.getProvince(s);case 11:if(e.city=t.sent,uni.getStorageSync("text")&&(d=JSON.parse(uni.getStorageSync("text")),e.receiver=d.receiver,e.mobile=d.mobile,e.houseNumber=d.houseNumber,e.check=d.commonAddr,e.addressId=d.addressId),!uni.getStorageSync("stopClean")){t.next=15;break}return t.abrupt("return");case 15:case"end":return t.stop()}}),t)})))()},getProvince:function(e){return(0,s.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,d.getCompleteArea)(e).then((function(e){if(e.success)return e.result.cityName}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},changeShowAddress:function(e){var t=this;e?this.showAddress=e:setTimeout((function(){t.showAddress=e}),500)},subAddsBlur:function(e){},getUserInfo:function(){var e=this;(0,d.getInfo)().then((function(t){t.success&&t.result.length>0&&(e.addressList=t.result&&t.result.length>0?t.result:[])}))},saveAddress:function(){var e=this;if(this.canSave)if(this.canSave=!1,!1!==this.phoneRight)if(this.mobileRight)uni.showToast({title:"请输入正确的手机号码",icon:"none"});else if(this.receiver)if(this.receiverRight)uni.showToast({title:"收货人不能带有表情",icon:"none"});else if(this.receiver.length>20)uni.showToast({title:"收货人名称最大长度不能超过20",icon:"none"});else if(-1==this.receiver.indexOf(" "))if(this.address)if(1!=this.subAddRight)if(""!=this.location){var t,i;i=this.defaultAdd?1:0;var a=this.location,s=a.split(",")[0],n=a.split(",")[1],r=this.address;t={addrId:this.addressId,receiver:this.receiver,mobile:this.mobile,areaCode:this.adcode,subAdds:r,commonAddr:i,houseNumber:this.houseNumber,ing:s,lat:n},(0,d.saveAddress)(t).then((function(t){1==t.status&&(uni.removeStorageSync("text"),uni.removeStorageSync("keys"),uni.getStorageSync("gaiaPriceParams")?e.syncPrice():uni.navigateBack()),e.canSave=!0})).catch((function(t){e.canSave=!0}))}else uni.showToast({title:"所在地区请选择匹配的定位地址",icon:"none"});else uni.showToast({title:"地址不能带有表情",icon:"none"});else uni.showToast({title:"请选择收货地址",icon:"none"});else uni.showToast({title:"收货人名称不能带有空格",icon:"none"});else uni.showToast({title:"请输入收货人名称",icon:"none"});else uni.showToast({title:"请输入正确的手机号码",icon:"none"})},syncPrice:function(){return(0,s.default)(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=uni.getStorageSync("gaiaPriceParams"),console.log(JSON.parse(t)),e.next=4,(0,d.syscGaiaProductPrice)(JSON.parse(t));case 4:i=e.sent,i?(console.log(i),uni.removeStorageSync("gaiaPriceParams"),uni.navigateBack()):uni.showToast({icon:"none",title:i.message});case 6:case"end":return e.stop()}}),e)})))()},goChoose:function(){var e={receiver:this.receiver,mobile:this.mobile,commonAddr:this.defaultAdd,addressId:this.addressId,houseNumber:this.houseNumber},t=JSON.stringify(e);uni.setStorageSync("text",t),this.gocheck=!0,console.log("🚀 ~ file: addAddress.vue ~ line 435 ~ goChoose ~ this.newAddress",this.newAddress),uni.redirectTo({url:"/commonModules/address/addressMap?addrId=".concat(this.addrId,"&newAddress=").concat(this.address,"&location=").concat(this.location,"&province=").concat(this.city,"&title=").concat(this.title)})},delAddress:function(){var e=this;uni.showModal({content:"是否删除该地址",success:function(t){t.confirm?(0,d.deladdress)({addrId:e.addrId}).then((function(e){1==e.status&&(uni.removeStorageSync("text"),uni.removeStorageSync("keys"),uni.navigateBack())})):t.cancel}})},clearInfo:function(e){this[e]=""},moveHandle:function(){this.updateSubAdds}}};t.default=c},"9d8df":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}));var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"w750",style:{"--themescolor":e.themes.color}},[i("v-uni-view",{staticClass:"edit-address",on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),e.moveHandle.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"item-span"},[e._v("收货人")]),i("v-uni-input",{staticClass:"item-inp",attrs:{type:"text",maxlength:"20",placeholder:"请填写收货人姓名","placeholder-style":"font-size: 28rpx; color: #ccc;"},on:{focus:function(t){arguments[0]=t=e.$handleEvent(t),e.changeShowAddress(!0)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.changeShowAddress(!1)}},model:{value:e.receiver,callback:function(t){e.receiver=t},expression:"receiver"}}),e.receiver?i("img",{staticClass:"close-icon",attrs:{src:e.staticServer+"static/images/info-clear.png",alt:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clearInfo("receiver")}}}):e._e()],1),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"item-span"},[e._v("手机号码")]),i("v-uni-input",{staticClass:"item-inp",attrs:{type:"number",maxlength:"11",placeholder:"请填写收货人手机号码","placeholder-style":"font-size: 28rpx; color: #ccc;"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),e.mobile?i("img",{staticClass:"close-icon",attrs:{src:e.staticServer+"static/images/info-clear.png",alt:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clearInfo("mobile")}}}):e._e(),e.canShowAddress?i("v-uni-view",{staticClass:"tips"},e._l(e.addressList,(function(t){return i("v-uni-view",{key:t.addrId,staticClass:"tips-item",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.changeReceiver(t)}}},[i("span",{staticClass:"tips-name"},[e._v(e._s(t.receiver))]),e._v(e._s(t.mobile))])})),1):e._e()],1),i("v-uni-view",{staticClass:"item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goChoose.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"item-span"},[e._v("所在地区")]),i("v-uni-input",{staticClass:"item-btn",attrs:{type:"text",disabled:!0,placeholder:"请选择所在地区","placeholder-style":"font-size: 28rpx; color: #ccc;"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),i("v-uni-view",{staticClass:"arr"},[e.staticServer?i("v-uni-image",{staticClass:"img",attrs:{src:e.staticServer+"static/images/arrow.png",alt:!0}}):e._e()],1)],1),i("v-uni-view",{staticClass:"item"},[i("v-uni-text",{staticClass:"item-span"},[e._v("门牌号")]),i("v-uni-input",{staticClass:"item-inp",attrs:{type:"text",maxlength:"200",placeholder:"详细地址（可不填写）","placeholder-style":"font-size: 28rpx; color: #ccc;"},model:{value:e.houseNumber,callback:function(t){e.houseNumber=t},expression:"houseNumber"}}),e.houseNumber?i("img",{staticClass:"close-icon",attrs:{src:e.staticServer+"static/images/info-clear.png",alt:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clearInfo("houseNumber")}}}):e._e()],1),e.addressDef?e._e():i("v-uni-view",[e.defaultAdd?e._e():i("v-uni-view",{staticClass:"item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeDefault.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"text-999"},[e._v("设为默认")]),i("small",{staticClass:"on-off"})],1),e.defaultAdd?i("v-uni-view",{staticClass:"item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeDefault.apply(void 0,arguments)}}},[e._v("设为默认"),i("small",{staticClass:"on-off on",style:{"background-color":"#07C160","border-color":"#07C160"}})]):e._e()],1)],1),i("v-uni-view",{staticClass:"btn-box",class:e.isHaveJaw?"pb-4 pt-2":"py-2"},[e.addressId?i("v-uni-view",{staticClass:"btn-gray mx-1",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delAddress.apply(void 0,arguments)}}},[e._v("删除地址")]):e._e(),i("v-uni-view",{staticClass:"btn-red mx-1",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveAddress.apply(void 0,arguments)}}},[e._v("保存")])],1)],1)},n=[]},ac35:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.edit-address[data-v-b9da875c]{background:#fff;min-height:100vh;padding:0 %?28?%}.edit-address .item[data-v-b9da875c]{position:relative;min-height:%?40?%;font-size:%?28?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;padding:%?28?% 0}.edit-address .item .item-span[data-v-b9da875c]{width:%?162?%;font-family:PingFangSC-Regular;color:#666;letter-spacing:0;text-align:left}.edit-address .item .item-inp[data-v-b9da875c],\r\n.edit-address .item .item-btn[data-v-b9da875c],\r\n.edit-address .item .item-txtarea[data-v-b9da875c]{width:%?494?%;font-family:PingFangSC-Regular;font-size:%?28?%;color:#333;letter-spacing:0;text-align:left}.edit-address .item .close-icon[data-v-b9da875c]{position:absolute;right:%?0?%;top:%?34?%;width:%?28?%;height:%?28?%}.edit-address .item .tips[data-v-b9da875c]{width:%?300?%;position:absolute;padding:%?10?% 0;left:%?158?%;top:%?-10?%;background:#fff;box-shadow:0 2px 6px 1px hsla(0,0%,82.4%,.54);border-radius:0 1px 0 1px 0 0 0;z-index:99}.edit-address .item .tips .tips-item[data-v-b9da875c]{padding:%?20?% %?8?%;font-family:PingFangSC-Regular;font-size:%?24?%;color:#666;letter-spacing:0}.edit-address .item .tips .tips-item .tips-name[data-v-b9da875c]{display:inline-block;width:%?116?%;text-align:center}.edit-address .item .isIphone[data-v-b9da875c]{margin:%?-10?% 0 0 %?-10?%}.edit-address .item .item-txtarea[data-v-b9da875c]{line-height:%?48?%;height:%?96?%;border:0;font-size:%?28?%}.edit-address .item .arr[data-v-b9da875c]{position:absolute;top:%?32?%;right:0;display:block;width:%?28?%;height:%?28?%;cursor:pointer;font-size:0}.edit-address .item .arr .img[data-v-b9da875c]{width:100%;height:100%;vertical-align:top}.edit-address .item[data-v-b9da875c]:not(last-child)::after{content:" ";width:%?722?%;height:%?2?%;background:#e8e8e8;position:absolute;right:%?-28?%;bottom:0}.myScrollView[data-v-b9da875c]{background:#f5f5f4;height:%?510?%}.add-item[data-v-b9da875c]{color:#666;display:-webkit-box;display:-webkit-flex;display:flex;font-size:%?28?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?20?% %?10?%}.add-item img[data-v-b9da875c]{display:block;width:%?26?%;height:%?26?%;margin-right:%?20?%;margin-left:%?10?%}.add-item .text[data-v-b9da875c]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.saveAddress[data-v-b9da875c]{background:#dc231e;border-radius:22px;height:44px;line-height:44px;margin:0;margin-top:60px;font-size:14px;text-align:center;color:#fff}.btn-box[data-v-b9da875c]{width:%?722?%;position:fixed;bottom:0;left:%?14?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;background:#fff}.btn-red[data-v-b9da875c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?80?%;line-height:%?80?%;background:#dc231e;color:#fff;border-radius:%?44?%;text-align:center}.btn-gray[data-v-b9da875c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?76?%;line-height:%?76?%;background:#fff;color:#dc231e;border:1px solid #dc231e;border-radius:%?44?%;text-align:center}.edit-address .item .on-off[data-v-b9da875c]{position:absolute;right:0}.edit-address .item .on-off[data-v-b9da875c]{position:absolute;right:0;top:10px;display:inline-block;width:42px;height:24px;-webkit-border-radius:50px;-moz-border-radius:50px;border-radius:50px;background-color:#f9f9f9;border:1px solid #ededed}.edit-address .item .on-off[data-v-b9da875c]:before{position:absolute;top:1px;left:1px;height:20px;width:20px;content:" ";-webkit-border-radius:50px;-moz-border-radius:50px;border-radius:50px;background-color:#fff;-webkit-box-shadow:1px 2px 2px 1px rgba(0,0,0,.1);-moz-box-shadow:1px 2px 2px 1px rgba(0,0,0,.1);box-shadow:1px 2px 2px 1px rgba(0,0,0,.1);transition:all .3s ease-in-out;-webkit-transition:all .3s ease-in-out;-webkit-animation:on-off1 .2s ease 1;-o-animation:on-off1 .2s ease 1;animation:on-off1 .2s ease 1;cursor:pointer}.edit-address .item .on[data-v-b9da875c]{background-color:var(--themescolor);border-color:var(--themescolor)}.edit-address .item .on[data-v-b9da875c]:before{right:1px;left:auto;-webkit-box-shadow:-1px 2px 2px 1px rgba(0,0,0,.1);-moz-box-shadow:-1px 2px 2px 1px rgba(0,0,0,.1);box-shadow:-1px 2px 2px 1px rgba(0,0,0,.1);transition:all .3s ease-in-out;-webkit-transition:all .3s ease-in-out;-webkit-animation:on-off .2s ease 1;-o-animation:on-off .2s ease 1;animation:on-off .2s ease 1;cursor:pointer}',""]),e.exports=t},d961:function(e,t,i){var a=i("ac35");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("62200084",a,!0,{sourceMap:!1,shadowMode:!1})},e8d7:function(e,t,i){"use strict";i.r(t);var a=i("9d8df"),s=i("64b8");for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);i("35f1");var r,o=i("f0c5"),d=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"b9da875c",null,!1,a["a"],r);t["default"]=d.exports}}]);